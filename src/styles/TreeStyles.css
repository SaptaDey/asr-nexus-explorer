/**
 * TreeStyles.css - Tailwind layer directives for botanical animation
 * Vibrant gradient palette with botanical theming
 */

@layer base {
  :root {
    /* Botanical color palette based on specification */
    --branch-hue: 120;
    --leaf-sat: 80%;
    --blossom-light: 70%;
    
    /* Tree-specific CSS variables */
    --root-bulb: 25 70% 55%;
    --rootlet: 120 60% 40%;
    --branch-primary: 110 70% 45%;
    --branch-secondary: 130 65% 50%;
    --evidence-bud: 90 80% 60%;
    --leaf-cluster: 140 85% 45%;
    --blossom-petal: 330 75% 75%;
    --pollen-gold: 45 95% 55%;
    --pollen-warning: 0 85% 60%;
    
    /* Animation timing variables */
    --growth-duration: 1200ms;
    --pulse-duration: 600ms;
    --bloom-duration: 800ms;
    --particle-duration: 2000ms;
  }

  .dark {
    /* Dark mode botanical adjustments */
    --root-bulb: 25 50% 35%;
    --rootlet: 120 40% 30%;
    --branch-primary: 110 50% 35%;
    --branch-secondary: 130 45% 40%;
    --evidence-bud: 90 60% 50%;
    --leaf-cluster: 140 65% 35%;
    --blossom-petal: 330 55% 55%;
  }
}

@layer components {
  /* Tree container styles */
  .tree-scene {
    @apply relative overflow-hidden rounded-lg border bg-gradient-to-br;
    @apply from-emerald-50 via-green-50 to-blue-50;
    @apply dark:from-emerald-950/20 dark:via-green-950/20 dark:to-blue-950/20;
  }

  /* Botanical element base styles */
  .botanical-element {
    @apply transition-all duration-300 ease-out;
    @apply hover:scale-110 cursor-pointer;
  }

  .root-bulb {
    @apply fill-[hsl(var(--root-bulb))] stroke-amber-800 stroke-2;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
  }

  .rootlet {
    @apply stroke-[hsl(var(--rootlet))] fill-none;
    @apply stroke-[3px] opacity-80;
  }

  .branch {
    @apply stroke-[hsl(var(--branch-primary))] fill-none;
    @apply stroke-[4px] opacity-90;
    stroke-linecap: round;
    stroke-linejoin: round;
  }

  .evidence-bud {
    @apply fill-[hsl(var(--evidence-bud))] stroke-green-700;
    @apply stroke-1 opacity-95;
  }

  .leaf-cluster {
    @apply fill-[hsl(var(--leaf-cluster))] stroke-green-800;
    @apply stroke-1 opacity-90;
    filter: drop-shadow(0 1px 2px rgba(0,0,0,0.1));
  }

  .blossom {
    @apply fill-[hsl(var(--blossom-petal))] stroke-pink-500;
    @apply stroke-1 opacity-95;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.15));
  }

  .pollen-particle {
    @apply fill-[hsl(var(--pollen-gold))] opacity-80;
    @apply animate-pulse;
  }

  .pollen-warning {
    @apply fill-[hsl(var(--pollen-warning))] opacity-90;
    @apply animate-bounce;
  }

  /* Pruned/withered elements */
  .withered {
    @apply opacity-20 grayscale;
    @apply transition-all duration-700 ease-out;
  }

  /* Color-blind accessible patterns */
  .pattern-stripe {
    stroke-dasharray: 3, 2;
  }

  .pattern-dot {
    stroke-dasharray: 1, 3;
  }

  .pattern-dash {
    stroke-dasharray: 8, 4;
  }

  /* Hover tooltips */
  .node-tooltip {
    @apply absolute z-50 p-2 bg-white dark:bg-gray-800 border rounded shadow-lg;
    @apply text-xs max-w-xs opacity-0 pointer-events-none;
    @apply transition-opacity duration-200;
  }

  .node-tooltip.visible {
    @apply opacity-100 pointer-events-auto;
  }

  /* Timeline scrubber styles */
  .growth-timeline {
    @apply relative w-full h-2 bg-gradient-to-r;
    @apply from-amber-200 via-green-300 to-pink-200;
    @apply dark:from-amber-900/30 dark:via-green-900/30 dark:to-pink-900/30;
    @apply rounded-full overflow-hidden;
  }

  .timeline-marker {
    @apply absolute top-0 w-1 h-full bg-primary;
    @apply transition-all duration-300 ease-out;
    @apply shadow-lg;
  }

  /* Stage indicators */
  .stage-indicator {
    @apply inline-flex items-center gap-1 px-2 py-1 rounded-full;
    @apply text-xs font-medium transition-colors duration-200;
  }

  .stage-indicator.active {
    @apply bg-primary text-primary-foreground;
  }

  .stage-indicator.completed {
    @apply bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300;
  }

  .stage-indicator.pending {
    @apply bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400;
  }
}

@layer utilities {
  /* Animation utilities */
  .animate-grow {
    animation: grow var(--growth-duration) ease-out forwards;
  }

  .animate-pulse-botanical {
    animation: pulse-botanical var(--pulse-duration) ease-in-out infinite;
  }

  .animate-bloom {
    animation: bloom var(--bloom-duration) ease-out forwards;
  }

  .animate-particle-float {
    animation: particle-float var(--particle-duration) ease-out forwards;
  }

  .animate-branch-draw {
    stroke-dasharray: 100;
    stroke-dashoffset: 100;
    animation: branch-draw var(--growth-duration) ease-out forwards;
  }

  /* Reduced motion alternatives */
  @media (prefers-reduced-motion: reduce) {
    .animate-grow,
    .animate-bloom,
    .animate-branch-draw {
      animation: fade-in 200ms ease-out forwards;
    }
    
    .animate-pulse-botanical,
    .animate-particle-float {
      animation: none;
    }
  }
}

/* Keyframe animations */
@keyframes grow {
  0% {
    transform: scale(0) rotate(-5deg);
    opacity: 0;
  }
  50% {
    transform: scale(1.1) rotate(2deg);
    opacity: 0.8;
  }
  100% {
    transform: scale(1) rotate(0deg);
    opacity: 1;
  }
}

@keyframes pulse-botanical {
  0%, 100% {
    transform: scale(1);
    filter: brightness(1);
  }
  50% {
    transform: scale(1.15);
    filter: brightness(1.2);
  }
}

@keyframes bloom {
  0% {
    transform: scale(0) rotate(45deg);
    opacity: 0;
  }
  60% {
    transform: scale(1.2) rotate(-10deg);
    opacity: 0.9;
  }
  100% {
    transform: scale(1) rotate(0deg);
    opacity: 1;
  }
}

@keyframes particle-float {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }
  50% {
    transform: translate(var(--float-x, 20px), var(--float-y, -30px)) scale(0.8);
    opacity: 0.6;
  }
  100% {
    transform: translate(var(--float-x, 40px), var(--float-y, -60px)) scale(0.3);
    opacity: 0;
  }
}

@keyframes branch-draw {
  0% {
    stroke-dashoffset: 100;
  }
  100% {
    stroke-dashoffset: 0;
  }
}

@keyframes fade-in {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

/* Print styles */
@media print {
  .tree-scene {
    @apply bg-white;
    -webkit-print-color-adjust: exact;
    color-adjust: exact;
  }
  
  .botanical-element {
    @apply transition-none;
  }
}